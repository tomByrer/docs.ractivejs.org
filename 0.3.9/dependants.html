<!doctype html>
<html lang='en-GB'>
<head>
	<meta charset='utf-8'>
	<meta http-equiv='X-UA-Compatible' content='IE=Edge,chrome=1'>

	<title> Dependants | Docs | Ractive.js </title >

	<meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'>

	<link rel='icon' type='image/png' href='../assets/favicon.png'>
	<link rel='stylesheet' href='../min.css'>

	<!--[if lte IE 8]>
		<script src='assets/respond.min.js'></script>
	<![endif]-->

</head>

<body class='example'>

	<nav>
	<div class='nav-inner'>
		<a href='http://ractivejs.org'>Ractive.js</a>

		<ul>
			<li><a href='http://ractivejs.org/60-second-setup'>60 second setup</a></li>
			<li><a href='http://learn.ractivejs.org'>Tutorials</a></li>
			<li><a href='http://examples.ractivejs.org'>Examples</a></li>
			<li class="selected"><a href='http://docs.ractivejs.org'>Docs</a></li>
			<li><a href='http://docs.ractivejs.org/latest/plugins'>Plugins</a></li>
			<li><a href='http://blog.ractivejs.org'>Blog</a></li>
			<li class='github-small'><a href='https://github.com/ractivejs/ractive'>GitHub</a></li>
		</ul>

		<a class='github-wide' href='https://github.com/ractivejs/ractive'>GitHub</a>

		<button id='nav-toggle'>&#9776;</button>
	</div>
</nav>


	<main>
		<div class='content'>
			<header class='main-header'>
				<h1>Dependants</h1>
				<a class='edit-link' href='https://github.com/ractivejs/docs.ractivejs.org/edit/master/docs/0.3.9/Dependants.md.hbs'>edit this page</a>
			</header>

			<p>Ractive maintains a <em>dependency graph</em> in order to do the minimum amount of work necessary to keep the DOM up-to-date.</p>
<p>If you inspect a Ractive instance in your console, you&#39;ll see a property called <code>_deps</code>. This is where all dependants are listed, indexed by their dependency.</p>
<p>There is also a concept of &#39;priority&#39;, which exists to save us some work. If, for example, a section needs to be removed (perhaps it&#39;s a conditional section, and the condition just went from truthy to falsy), there is no point in updating all its children, so we make sure that we teardown the section first. As part of that teardown process, the children - which all have lower priority - unregister themselves as dependants before they get a chance to update.</p>
<h2 id="indirect-dependencies">Indirect dependencies</h2>
<p>If you have a mustache which depends on <code>foo.bar</code>, and <code>foo</code> changes, it&#39;s quite possible that the mustache needs to re-render. We say that the mustache has an <em>indirect dependency</em> on <code>foo</code>, or that it has a <em>direct dependency on a downstream keypath</em> of <code>foo</code>.</p>
<p>This relationship is expressed through the <code>_depsMap</code> property of a Ractive instance - whenever <code>foo</code> changes, as well as dealing with direct <code>foo</code> dependants we check the map for those indirect dependants.</p>
<p>In the case of <a href="expressions">expressions</a> and <a href="observers">observers</a>, we also need to consider dependants of <em>upstream keypaths</em>. For example, suppose we have a section based on a sorted array - if we modify one of the members of the array, we need to see if the sort order has changed or not as a result:</p>
<pre><code class="language-html">{{#( sort( list, &#39;name&#39; ) )}}
  &lt;p&gt;{{name}}&lt;/p&gt;
{{/()}}</code></pre>
<pre><code class="language-js">ractive = <span class="keyword">new</span> Ractive({
  el: myContainer,
  template: myTemplate,
  data: {
    list: [{ name: <span class="string">'Bob'</span> }, { name: <span class="string">'Charles'</span> }, { name: <span class="string">'Alice'</span> }],
    sort: <span class="function"><span class="keyword">function</span> <span class="params">( list, property )</span> {</span>
      <span class="keyword">return</span> list.slice().sort( <span class="function"><span class="keyword">function</span> <span class="params">( a, b )</span> {</span>
        <span class="keyword">return</span> a[ property ] &lt; b[ property ] ? -<span class="number">1</span> : <span class="number">1</span>;
      });
    }
  }
});

<span class="comment">// renders Alice, Bob, Charles</span>

ractive.set( <span class="string">'list[0].name'</span>, <span class="string">'Zebediah'</span> );

<span class="comment">// updates to Alice, Charles, Zebediah</span></code></pre>
<p>In the example, setting <code>list[0].name</code> causes dependants of <code>list</code> to be updated.</p>
<p>As well as <a href="expressions">expressions</a>, <a href="observers">Observers</a> respond to both upstream and downstream changes.</p>
<h2 id="expressions-with-multiple-dependencies">Expressions with multiple dependencies</h2>
<p>The expression <code>{{ a + b }}</code> has two dependencies - <code>a</code> and <code>b</code> (or more accurately, whatever those <a href="references">references</a> resolve to). The <code>_deps</code> graph actually includes objects representing those individual references, rather than the expression itself - the reference objects then notify the expression (if their value has changed) that it will need to re-evaluate itself.</p>
<p>Because the expression has multiple dependencies, it won&#39;t trigger an update straight away - it will wait until all the new data has come in first. So doing <code>ractive.set({ a: 1, b: 2 })</code> will only trigger one update, not two.</p>

		</div>

		<aside class="left-nav">
			<section>
	<h1>Introduction</h1>
	<ul>
		<li><a href="get-started">Get started</a></li>
		<li><a href="get-support">Get support</a></li>
		<li><a href="contributing">Contributing</a></li>
	</ul>
</section>

<section>
	<h1>API Reference</h1>
	<h2>new Ractive(...)</h2>
	<ul>
		<li><a href="initialisation-options">Initialisation options</a></li>
	</ul>

	<h2>Instance methods</h2>
	<ul>
		<li><a href="ractive-animate">ractive.animate()</a></li>
		<li><a href="ractive-find">ractive.find()</a></li>
		<li><a href="ractive-findall">ractive.findAll()</a></li>
		<li><a href="ractive-fire">ractive.fire()</a></li>
		<li><a href="ractive-get">ractive.get()</a></li>
		<li><a href="ractive-merge">ractive.merge()</a></li>
		<li><a href="ractive-observe">ractive.observe()</a></li>
		<li><a href="ractive-off">ractive.off()</a></li>
		<li><a href="ractive-on">ractive.on()</a></li>
		<li><a href="ractive-set">ractive.set()</a></li>
		<li><a href="ractive-teardown">ractive.teardown()</a></li>
		<li><a href="ractive-tohtml">ractive.toHTML()</a></li>
		<li><a href="ractive-update">ractive.update()</a></li>
		<li><a href="ractive-updatemodel">ractive.updateModel()</a></li>
	</ul>

	<h2>Instance properties</h2>
	<ul>
		<li><a href="ractive-nodes">ractive.nodes</a></li>
		<li><a href="ractive-transitions-instance">ractive.transitions</a></li>
		<li><a href="ractive-partials-instance">ractive.partials</a></li>
	</ul>

	<h2>Static methods</h2>
	<ul>
		<li><a href="ractive-parse">Ractive.parse()</a></li>
		<li><a href="ractive-extend">Ractive.extend()</a></li>
	</ul>

	<h2>Static properties</h2>
	<ul>
		<li><a href="ractive-defaults">Ractive.defaults</a></li>
	</ul>
</ul>

<section>
	<h1>Plugins</h1>
	<ul>
		<li><a href="plugins">List of plugins</a></li>
		<li><a href="writing-plugins">Writing plugins</a></li>
	</ul>
</section>

<section>
	<h1>Glossary</h1>
	<ul>
		<li><a href="adaptors">Adaptors</a></li>
		<li><a href="array-modification">Array modification</a></li>
		<li><a href="components">Components</a></li>
		<li><a href="decorators">Decorators</a></li>
		<li><a href="dependants">Dependants</a></li>
		<li><a href="expressions">Expressions</a></li>
		<li><a href="events">Events</a></li>
		<li><a href="keypaths">Keypaths</a></li>
		<li><a href="magic-mode">Magic mode</a></li>
		<li><a href="mustaches">Mustaches</a></li>
		<li><a href="observers">Observers</a></li>
		<li><a href="parallel-dom">Parallel DOM</a></li>
		<li><a href="partials">Partials</a></li>
		<li><a href="references">References</a></li>
		<li><a href="templates">Templates</a></li>
		<li><a href="transitions">Transitions</a></li>
		<li><a href="two-way-binding">Two-way binding</a></li>
	</ul>
</section>

<section>
	<h1>Specific versions</h1>

	<ul>
		<li><a href='../0.3.9'>0.3.9</a></li>
		<li><a href='../0.4.0'>0.4.0</a></li>
	</ul>
</section>

		</aside>
	</main>

	<footer>
	<p>Ractive.js is a free and open source project released under the MIT license.</p>
</footer>


	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-5602942-6', 'ractivejs.org');
	ga('send', 'pageview');
</script>


	<script src='../assets/nav.js'></script>

</body>
</html>
